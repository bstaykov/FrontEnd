<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Spa Apps with sammy.js</title>
</head>
<body>
    <nav>
        <ul>
            <li>
                <a href="#/">Link #/ (redirect to #/home)</a>
            </li>
            <li>
                <a href="#/home">Link #/home</a>
            </li>
            <li>
                <a href="#/info">Link #/info</a>
            </li>
            <li>
                <a href="#/add/Ivan/23">Add Ivan of age 23</a>
            </li>
        </ul>
    </nav>
    <div id="content"></div>
    <script src="node_modules/jquery/dist/jquery.js"></script>
    <script src="node_modules/handlebars/dist/handlebars.js"></script>
    <script src="node_modules/q/q.js"></script>
    <script src="node_modules/sammy/lib/sammy.js"></script>
    <script src="person.js"></script>
    <script src="database.js"></script>
    <script>
        var handlebars = handlebars || Handlebars;
        var Handlebars = handlebars || Handlebars;

        var templates = (function () {
            function get(templateName) {
                var deferred = Q.defer();
                $.ajax({
                    url: 'templates/' + templateName + '.html',
                    success: function (html) {
                        deferred.resolve(html);
                    },
                    error: function (error) {
                        deferred.reject(error);
                    }
                });

                return deferred.promise;
            }

            return {
                get: get
            };
        }());
    </script>
    <script src="app.js"></script>
    <script id="people-template" type="text/x-handlebars-template">
        {{#if people}}
        <table>
            <tr>
                <th>Name</th>
            </tr>
            {{#each people}}
            <tr>
                <td>
                    <a href="#/person/{{id}}">{{name}}</a>
                    <a href="#/delete/{{id}}">Delete</a>
                </td>
            </tr>
            {{/each}}
        </table>
        {{/if}}
    </script>
</body>
</html>
